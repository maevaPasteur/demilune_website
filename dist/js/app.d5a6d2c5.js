(function(e){function t(t){for(var a,i,o=t[0],l=t[1],u=t[2],p=0,m=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0ad9":function(e,t,n){e.exports=n.p+"img/cover2.af78825c.webp"},"0e7f":function(e,t,n){},"1b67":function(e,t,n){},"1ea8":function(e,t,n){"use strict";var a=n("6516"),r=n.n(a);r.a},"206d":function(e,t,n){"use strict";var a=n("4413"),r=n.n(a);r.a},"21bb":function(e,t,n){"use strict";var a=n("2dad"),r=n.n(a);r.a},2238:function(e,t,n){"use strict";var a=n("52b5"),r=n.n(a);r.a},"2dad":function(e,t,n){},3003:function(e,t,n){"use strict";var a=n("d748"),r=n.n(a);r.a},"375e":function(e,t,n){e.exports=n.p+"img/cover3.5d557bbf.webp"},3777:function(e,t,n){"use strict";var a=n("0e7f"),r=n.n(a);r.a},"3a89":function(e,t,n){},4413:function(e,t,n){},"47a3":function(e,t,n){e.exports=n.p+"img/cover4.50677474.webp"},"48eb":function(e,t,n){"use strict";var a=n("6b19"),r=n.n(a);r.a},"52b5":function(e,t,n){},5654:function(e,t,n){e.exports=n.p+"media/demilune.aef5152c.mp4"},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("a9e3"),n("b680"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],i=(n("5c0b"),n("2877")),o={},l=Object(i["a"])(o,r,s,!1,null,null,null),u=l.exports,c=n("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.general?a("default-layout",{attrs:{text:e.general.footer}},[a("div",{staticClass:"page-home"},[a("section",{staticClass:"section_video"},[a("div",[a("h1",{domProps:{innerHTML:e._s(e.title())}}),a("div",[a("router-link",{attrs:{to:{name:"Carte"}}},[e._v(e._s(e.general.button))])],1)]),a("video",{attrs:{autoplay:"",muted:"",loop:"",poster:n("f768")},domProps:{muted:!0}},[a("source",{attrs:{src:n("5654"),type:"video/mp4"}})])]),a("section",{staticClass:"section_text wrapper section-1"},[a("h2",[e._v(e._s(e.general.title_2))]),a("p",[e._v(e._s(e.general.text_2))])]),a("img",{attrs:{src:n("b1cb"),alt:"terrasse du restaurant la demi-lune à Dole"}}),a("section",{staticClass:"section_horraires wrapper section-1"},[a("h2",[e._v("Horraires")]),a("ul",[e.general.day_1&&""!==e.general.day_1?a("li",[a("span",[e._v("Lundi")]),e._v(e._s(e.general.day_1))]):e._e(),e.general.day_2&&""!==e.general.day_2?a("li",[a("span",[e._v("Mardi")]),e._v(e._s(e.general.day_2))]):e._e(),a("li",[a("span",[e._v("Mercredi")]),e._v(e._s(e.general.day_3))]),a("li",[a("span",[e._v("Jeudi")]),e._v(e._s(e.general.day_4))]),a("li",[a("span",[e._v("Vendredi")]),e._v(e._s(e.general.day_5))]),a("li",[a("span",[e._v("Samedi")]),e._v(e._s(e.general.day_6))]),a("li",[a("span",[e._v("Dimanche")]),e._v(e._s(e.general.day_7))])])]),a("gallery"),a("section",{staticClass:"section_menu wrapper section-1 center"},[a("router-link",{staticClass:"link-2",attrs:{to:{name:"Carte"}}},[e._v(e._s(e.general.button_2))])],1)],1)]):e._e()},m=[],d=(n("4160"),n("ac1f"),n("1276"),n("159b"),n("bc3a")),v=n.n(d),g=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"sections_images"},[a("img",{attrs:{src:n("f141"),alt:"terrasse du restaurant la demi-lune à Dole"}}),a("img",{attrs:{src:n("47a3"),alt:"terrasse du restaurant la demi-lune à Dole"}}),a("img",{attrs:{src:n("375e"),alt:"terrasse du restaurant la demi-lune à Dole"}}),a("img",{attrs:{src:n("0ad9"),alt:"terrasse du restaurant la demi-lune à Dole"}})])}],_={name:"Gallery"},h=_,y=(n("5baa"),Object(i["a"])(h,g,f,!1,null,null,null)),w=y.exports,b={name:"Home",components:{Gallery:w},mounted:function(){var e=this;v.a.get("http://localhost:3000/general",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){t.data.error||!t.data.length?console.log("général est vide"):(e.general=t.data[0],e.testSections())})).catch((function(e){console.log(e)}))},data:function(){return{general:void 0}},updated:function(){var e=this;this.testSections(),window.addEventListener("scroll",(function(){e.testSections()}))},methods:{title:function(){if(this.general){var e="";return this.general.title.split("<br>").forEach((function(t){e+="<span>".concat(t,"</span>")})),e}},testSections:function(){var e=this;document.querySelectorAll(".page-home section:not(.show)").forEach((function(t){e.isVisible(t)&&t.classList.add("show")}))},isVisible:function(e){var t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>=0}}},x=b,M=(n("21bb"),Object(i["a"])(x,p,m,!1,null,null,null)),C=M.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},P=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],A={},$=Object(i["a"])(A,k,P,!1,null,null,null),S=$.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.ready?a("div",{staticClass:"page-login wrapper"},[a("img",{attrs:{src:n("e347"),alt:"logo du restaurant la Demi-lune à Dole"}}),a("h1",[e._v("Connexion")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[e.errorMessage?a("p",{staticClass:"error"}):e._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",name:"username",required:"",placeholder:"Identifiant"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",required:"",placeholder:"Mot de passe"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("button",{attrs:{type:"submit"}},[e._v("Se connecter")]),e.error?a("p",{staticClass:"error"},[e._v("Nom d'utilisateur et mot de passe incorrectes")]):e._e()])]):e._e()},N=[],L=n("d4ec"),T=n("bee2"),E=function(){function e(){Object(L["a"])(this,e),this.state={auth:localStorage.getItem("usertoken")&&""!==localStorage.getItem("usertoken")}}return Object(T["a"])(e,[{key:"logout",value:function(){localStorage.removeItem("usertoken"),this.state.auth=!1}},{key:"login",value:function(e){localStorage.setItem("usertoken",e),this.state.auth=!0}}]),e}(),j=new E,D={name:"Login",data:function(){return{username:"",password:"",error:!1,ready:!1}},props:{errorMessage:{type:String,default:""}},mounted:function(){j.state.auth?window.location.href="admin":this.ready=!0},methods:{submit:function(){var e=this;v.a.post("http://localhost:3000/users/login",{username:this.username,password:this.password,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){t.data.error?e.error=!0:(j.login(t.data),window.location.href="admin")})).catch((function(e){console.log("La connexion a échoué",e)}))}}},q=D,B=(n("206d"),Object(i["a"])(q,O,N,!1,null,null,null)),R=B.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[e.ready?n("div",{staticClass:"wrapper section-admin-1"},[e.general?n("div",[n("h1",[e._v("Bienvenue")]),n("p",[e._v("Modifier les textes de la page d'accueil")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Section avec vidéo")]),n("label",[n("span",[e._v("Titre")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.general.title,expression:"general.title"}],attrs:{required:""},domProps:{value:e.general.title},on:{input:function(t){t.target.composing||e.$set(e.general,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Bouton")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.button,expression:"general.button"}],attrs:{type:"text",required:""},domProps:{value:e.general.button},on:{input:function(t){t.target.composing||e.$set(e.general,"button",t.target.value)}}})])]),n("div",[n("h2",[e._v("Block de texte")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.title_2,expression:"general.title_2"}],attrs:{type:"text",required:""},domProps:{value:e.general.title_2},on:{input:function(t){t.target.composing||e.$set(e.general,"title_2",t.target.value)}}})]),n("label",[n("span",[e._v("Texte")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.general.text_2,expression:"general.text_2"}],attrs:{required:""},domProps:{value:e.general.text_2},on:{input:function(t){t.target.composing||e.$set(e.general,"text_2",t.target.value)}}})])]),n("div",[n("h2",[e._v("Les horraires")]),n("label",[n("span",[e._v("Lundi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_1,expression:"general.day_1"}],attrs:{type:"text"},domProps:{value:e.general.day_1},on:{input:function(t){t.target.composing||e.$set(e.general,"day_1",t.target.value)}}})]),n("label",[n("span",[e._v("Mardi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_2,expression:"general.day_2"}],attrs:{type:"text"},domProps:{value:e.general.day_2},on:{input:function(t){t.target.composing||e.$set(e.general,"day_2",t.target.value)}}})]),n("label",[n("span",[e._v("Mercredi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_3,expression:"general.day_3"}],attrs:{type:"text"},domProps:{value:e.general.day_3},on:{input:function(t){t.target.composing||e.$set(e.general,"day_3",t.target.value)}}})]),n("label",[n("span",[e._v("Jeudi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_4,expression:"general.day_4"}],attrs:{type:"text"},domProps:{value:e.general.day_4},on:{input:function(t){t.target.composing||e.$set(e.general,"day_4",t.target.value)}}})]),n("label",[n("span",[e._v("Vendredi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_5,expression:"general.day_5"}],attrs:{type:"text"},domProps:{value:e.general.day_5},on:{input:function(t){t.target.composing||e.$set(e.general,"day_5",t.target.value)}}})]),n("label",[n("span",[e._v("Samedi")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_6,expression:"general.day_6"}],attrs:{type:"text"},domProps:{value:e.general.day_6},on:{input:function(t){t.target.composing||e.$set(e.general,"day_6",t.target.value)}}})]),n("label",[n("span",[e._v("Dimanche")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.day_7,expression:"general.day_7"}],attrs:{type:"text"},domProps:{value:e.general.day_7},on:{input:function(t){t.target.composing||e.$set(e.general,"day_7",t.target.value)}}})])]),n("div",[n("h2",[e._v("Pied de page")]),n("label",[n("span",[e._v("Texte")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.general.footer,expression:"general.footer"}],attrs:{required:""},domProps:{value:e.general.footer},on:{input:function(t){t.target.composing||e.$set(e.general,"footer",t.target.value)}}})])]),e.success?n("p",{staticClass:"success"},[e._v("Vos modifications ont bien été enregistrées")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Enregistrer les modifications")])])]):n("h1",[e._v("Aucun setting n'est enregistré pour le moment")])]):e._e()]):e._e()},I=[],V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-admin"},[a("header",[a("router-link",{attrs:{to:"/"}},[a("img",{attrs:{src:n("e347"),alt:"logo du restaurant la Demi-lune à Dole"}})]),a("nav",[a("ul",[a("li",[a("router-link",{attrs:{to:{name:"Admin"}}},[e._v("Paramètres globaux")])],1),a("li",[a("router-link",{attrs:{to:{name:"RestaurantMenu"}}},[e._v("La carte")])],1),a("li",[a("router-link",{attrs:{to:{name:"Pages"}}},[e._v("Les pages")])],1),a("li",[a("router-link",{attrs:{to:{name:"Menus"}}},[e._v("Les menus")])],1),a("li",[a("router-link",{attrs:{to:{name:"Meals"}}},[e._v("Les plats")])],1)])]),a("button",{staticClass:"link-2",on:{click:e.logout}},[e._v("Déconnexion")])],1),a("main",[e._t("default")],2)])},H=[],U={name:"Layout2",methods:{logout:function(){j.logout(),window.location.href="/connexion"}}},G=U,F=(n("f00e"),Object(i["a"])(G,V,H,!1,null,null,null)),J=F.exports,W={name:"Admin",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;this.auth||(window.location.href="/connexion"),v.a.get("http://localhost:3000/general",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){t.data.error||!t.data.length?console.log("général est vide"):e.general=t.data[0],e.ready=!0})).catch((function(t){console.log(t),e.ready=!0}))},data:function(){return{general:void 0,ready:!1,success:!1}},methods:{submit:function(){var e=this;v.a.patch("http://localhost:3000/general/".concat(this.general._id),{button:this.general.button,button_2:this.general.button_2,day_1:this.general.day_1,day_2:this.general.day_2,day_3:this.general.day_3,day_4:this.general.day_4,day_5:this.general.day_5,day_6:this.general.day_6,day_7:this.general.day_7,footer:this.general.footer,text_2:this.general.text_2,title:this.general.title,title_2:this.general.title_2,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){console.log(t),e.success=!0})).catch((function(t){console.log(t),e.success=!1}))}}},Y=W,Q=Object(i["a"])(Y,z,I,!1,null,null,null),K=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[n("div",{staticClass:"wrapper"},[n("h1",[e._v("La liste des plats proposés")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"MealCreate"}}},[e._v("Créer un plat +")]),e.ready?n("div",{staticClass:"list"},e._l(e.meals,(function(t,a){return n("details",{key:a},[n("summary",[n("h2",[e._v(e._s(a))])]),e._l(t,(function(t){return n("router-link",{key:t.title,attrs:{to:{name:"MealUpdate",params:{id:t._id}}}},[n("h3",[e._v(e._s(t.title)+" "),t.price?n("span",[e._v("- "+e._s(t.price)+"€")]):e._e()]),t.description?n("p",[e._v(e._s(t.description))]):e._e(),t.infos?n("p",{staticClass:"infos"},[e._v(e._s(t.infos))]):e._e(),t.variant_1_title||t.variant_2_title?n("ul",[t.variant_1_title?n("li",[e._v(e._s(t.variant_1_title+" - "+t.variant_1_price)+"€")]):e._e(),t.variant_2_title?n("li",[e._v(e._s(t.variant_2_title+" - "+t.variant_2_price)+"€")]):e._e()]):e._e()])}))],2)})),0):e._e()],1)]):e._e()},Z=[],ee=(n("d3b7"),n("96cf"),n("1da1")),te={name:"Meals",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auth||(window.location.href="/connexion"),t.next=3,e.getMealsType();case 3:return t.next=5,e.getMeals();case 5:e.mealTypes.forEach((function(t){var n=e.allMeals.filter((function(e){return e.type===t._id}));n.length&&(e.meals[t.title]=n)})),console.log(e.meals),e.ready=!0;case 8:case"end":return t.stop()}}),t)})))()},data:function(){return{ready:!1,meals:{},mealTypes:[],allMeals:[]}},methods:{getMealsType:function(){var e=this;return new Promise((function(t){v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(n){e.mealTypes=n.data,t(!0)})).catch((function(e){t(!1),console.log(e)}))}))},getMeals:function(){var e=this;return new Promise((function(t){v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(n){e.allMeals=n.data,t(!0)})).catch((function(e){t(!1),console.log(e)}))}))}}},ne=te,ae=Object(i["a"])(ne,X,Z,!1,null,null,null),re=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[n("div",{staticClass:"wrapper"},[n("router-link",{attrs:{to:{name:"Meals"}}},[e._v("Voir tous les plats +")]),e.ready?n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Créer un plat")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.title,expression:"newMeal.title"}],attrs:{type:"text",required:""},domProps:{value:e.newMeal.title},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Type de plat")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.type,expression:"newMeal.type"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newMeal,"type",t.target.multiple?n:n[0])}}},e._l(e.mealTypes,(function(t){return n("option",{key:t.title,domProps:{value:t._id}},[e._v(e._s(t.title))])})),0)]),n("label",[n("span",[e._v("Prix (optionnel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.price,expression:"newMeal.price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.newMeal.price},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"price",t.target.value)}}})]),n("label",[n("span",[e._v("Description (optionel)")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.description,expression:"newMeal.description"}],domProps:{value:e.newMeal.description},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"description",t.target.value)}}})]),n("label",[n("span",[e._v("Informations supplémentaires (optionel)")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.infos,expression:"newMeal.infos"}],domProps:{value:e.newMeal.infos},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"infos",t.target.value)}}})]),n("div",{staticClass:"d-flex"},[n("label",[n("span",[e._v("Nom de la variante 1 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.variant_1_title,expression:"newMeal.variant_1_title"}],attrs:{type:"text",placeholder:"Escargots x6"},domProps:{value:e.newMeal.variant_1_title},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"variant_1_title",t.target.value)}}})]),n("label",[n("span",[e._v("Prix de la variante 1 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.variant_1_price,expression:"newMeal.variant_1_price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.newMeal.variant_1_price},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"variant_1_price",t.target.value)}}})])]),n("div",{staticClass:"d-flex"},[n("label",[n("span",[e._v("Nom de la variante 2 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.variant_2_title,expression:"newMeal.variant_2_title"}],attrs:{type:"text",placeholder:"Escargots x12"},domProps:{value:e.newMeal.variant_2_title},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"variant_2_title",t.target.value)}}})]),n("label",[n("span",[e._v("Prix de la variante 2 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeal.variant_2_price,expression:"newMeal.variant_2_price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.newMeal.variant_2_price},on:{input:function(t){t.target.composing||e.$set(e.newMeal,"variant_2_price",t.target.value)}}})])])]),e.success?n("p",{staticClass:"success"},[e._v("Le plat a bien été créé")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Créer le nouveau plat")])]):e._e()],1)]):e._e()},ie=[],oe=(n("4fad"),n("3835")),le={name:"MealsCreate",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;this.auth||(window.location.href="/connexion"),v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.mealTypes=t.data,console.log(e.mealTypes),e.ready=!0})).catch((function(t){console.log(t),e.ready=!1}))},data:function(){return{success:!1,mealTypes:void 0,ready:!1,newMeal:{title:null,description:null,infos:null,type:null,price:null,variant_1_title:null,variant_1_price:null,variant_2_title:null,variant_2_price:null}}},methods:{submit:function(){for(var e=this,t={headers:{"Access-Control-Allow-Origin":"*"}},n=0,a=Object.entries(this.newMeal);n<a.length;n++){var r=Object(oe["a"])(a[n],2),s=r[0],i=r[1];i&&(t[s]=i)}v.a.post("http://localhost:3000/meals",t).then((function(t){console.log(t),e.success=!0,e.newMeal={title:null,description:null,infos:null,type:null,price:null,variant_1_title:null,variant_1_price:null,variant_2_title:null,variant_2_price:null}})).catch((function(t){console.log(t),e.success=!1}))}}},ue=le,ce=Object(i["a"])(ue,se,ie,!1,null,null,null),pe=ce.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth&&e.ready?n("Layout2",[n("div",{staticClass:"wrapper"},[n("router-link",{attrs:{to:{name:"Meals"}}},[e._v("Voir tous les plats +")]),e.meal?n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Modifier")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.title,expression:"meal.title"}],attrs:{type:"text",required:""},domProps:{value:e.meal.title},on:{input:function(t){t.target.composing||e.$set(e.meal,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Type de plat")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.meal.type,expression:"meal.type"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.meal,"type",t.target.multiple?n:n[0])}}},e._l(e.mealTypes,(function(t){return n("option",{key:t.title,domProps:{value:t._id}},[e._v(e._s(t.title))])})),0)]),n("label",[n("span",[e._v("Prix (optionnel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.price,expression:"meal.price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.meal.price},on:{input:function(t){t.target.composing||e.$set(e.meal,"price",t.target.value)}}})]),n("label",[n("span",[e._v("Description (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.description,expression:"meal.description"}],attrs:{type:"text"},domProps:{value:e.meal.description},on:{input:function(t){t.target.composing||e.$set(e.meal,"description",t.target.value)}}})]),n("label",[n("span",[e._v("Informations supplémentaires (optionel)")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.meal.infos,expression:"meal.infos"}],domProps:{value:e.meal.infos},on:{input:function(t){t.target.composing||e.$set(e.meal,"infos",t.target.value)}}})]),n("div",{staticClass:"d-flex"},[n("label",[n("span",[e._v("Nom de la variante 1 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.variant_1_title,expression:"meal.variant_1_title"}],attrs:{type:"text",placeholder:"Escargots x6"},domProps:{value:e.meal.variant_1_title},on:{input:function(t){t.target.composing||e.$set(e.meal,"variant_1_title",t.target.value)}}})]),n("label",[n("span",[e._v("Prix de la variante 1 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.variant_1_price,expression:"meal.variant_1_price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.meal.variant_1_price},on:{input:function(t){t.target.composing||e.$set(e.meal,"variant_1_price",t.target.value)}}})])]),n("div",{staticClass:"d-flex"},[n("label",[n("span",[e._v("Nom de la variante 2 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.variant_2_title,expression:"meal.variant_2_title"}],attrs:{type:"text",placeholder:"Escargots x12"},domProps:{value:e.meal.variant_2_title},on:{input:function(t){t.target.composing||e.$set(e.meal,"variant_2_title",t.target.value)}}})]),n("label",[n("span",[e._v("Prix de la variante 2 (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meal.variant_2_price,expression:"meal.variant_2_price"}],attrs:{type:"number",step:"0.01"},domProps:{value:e.meal.variant_2_price},on:{input:function(t){t.target.composing||e.$set(e.meal,"variant_2_price",t.target.value)}}})])])]),e.success?n("p",{staticClass:"success"},[e._v("Modifications effectuées")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Mettre à jour")]),n("button",{staticClass:"link-2 delete",on:{click:function(t){return t.preventDefault(),e.deleteMeal(t)}}},[e._v("Supprimer")])])]):n("h1",[e._v("Aucun plat ne correspond à cette url")])],1)]):e._e()},de=[],ve={name:"MealsUpdate",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;this.auth||(window.location.href="/connexion"),v.a.get("http://localhost:3000/meals/".concat(this.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.meal=t.data,console.log(e.meal),e.ready=!0,v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.mealTypes=t.data})).catch((function(e){console.log(e)}))})).catch((function(t){console.log(t),e.ready=!0}))},data:function(){return{ready:!1,meal:void 0,mealTypes:[],success:!1}},methods:{submit:function(){for(var e=this,t={headers:{"Access-Control-Allow-Origin":"*"}},n=0,a=Object.entries(this.meal);n<a.length;n++){var r=Object(oe["a"])(a[n],2),s=r[0],i=r[1];i&&(t[s]=i)}v.a.patch("http://localhost:3000/meals/".concat(this.meal._id),t).then((function(t){console.log(t),e.success=!0})).catch((function(t){console.log(t),e.success=!1}))},deleteMeal:function(){v.a.delete("http://localhost:3000/meals/".concat(this.meal._id)).then((function(){window.location.href="/admin/plats"})).catch((function(e){console.log(e)}))}}},ge=ve,fe=Object(i["a"])(ge,me,de,!1,null,null,null),_e=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[e.pages?n("div",{staticClass:"wrapper"},[e.pages.length?n("div",{staticClass:"container-drag"},[n("h1",[e._v("La liste des pages de la carte")]),e.pages.length>1?n("h2",[e._v("Faites glisser les blocks pour changer l'ordre des pages et menus dans la carte")]):e._e(),n("draggable",{on:{change:e.saveOrder},model:{value:e.pages,callback:function(t){e.pages=t},expression:"pages"}},[n("transition-group",e._l(e.pages,(function(t){return n("div",{key:t.title,staticClass:"item"},[n("p",[e._v(e._s(t.title))]),"menu"===t.type?n("router-link",{staticClass:"link-1",attrs:{to:{name:"MenusUpdate",params:{id:t.id}}}},[n("span",[e._v("Modifier")])]):n("router-link",{staticClass:"link-1",attrs:{to:{name:"PagesUpdate",params:{id:t.id}}}},[n("span",[e._v("Modifier")])])],1)})),0)],1),n("router-link",{staticClass:"link-2",attrs:{to:{name:"PagesCreate"}}},[e._v("Créer une page +")])],1):n("div",[n("h1",[e._v("Vous n'avez créé aucune page ni menu pour le moment")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"PagesCreate"}}},[e._v("Créer une page +")])],1)]):e._e()]):e._e()},ye=[],we=n("310e"),be=n.n(we),xe={name:"Pages",components:{Layout2:J,draggable:be.a},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get("http://localhost:3000/pages",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.pages=t.data,console.log(e.pages)})).catch((function(t){e.pages=[],console.log(t)}));case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{pages:void 0,generalId:void 0}},methods:{saveOrder:function(){v.a.patch("http://localhost:3000/pages",{headers:{"Access-Control-Allow-Origin":"*"},pages:this.pages}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},Me=xe,Ce=Object(i["a"])(Me,he,ye,!1,null,null,null),ke=Ce.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[n("div",{staticClass:"wrapper"},[n("router-link",{attrs:{to:{name:"Pages"}}},[e._v("Voir toutes les pages")]),e.ready?n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Ajouter une page")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.title,expression:"page.title"}],attrs:{type:"text",required:""},domProps:{value:e.page.title},on:{input:function(t){t.target.composing||e.$set(e.page,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Description (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.description,expression:"page.description"}],attrs:{type:"text"},domProps:{value:e.page.description},on:{input:function(t){t.target.composing||e.$set(e.page,"description",t.target.value)}}})]),n("div",{staticClass:"create-content"},[n("h3",[e._v("Choisir son contenu")]),e._l(e.meals,(function(t,a){return n("details",{key:a},[n("summary",[n("h2",[e._v(e._s(a))])]),e._l(t,(function(t){return n("label",{key:t.title},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.content,expression:"page.content"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.page.content)?e._i(e.page.content,t._id)>-1:e.page.content},on:{change:function(n){var a=e.page.content,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.page,"content",a.concat([i])):o>-1&&e.$set(e.page,"content",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.page,"content",s)}}}),n("span",[e._v(e._s(t.title))])])}))],2)}))],2)]),e.success?n("p",{staticClass:"success"},[e._v("La page a bien été créé")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Créer la nouvelle page")])]):e._e()],1)]):e._e()},Ae=[],$e={name:"PagesCreate",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auth||(window.location.href="/connexion"),n=new Date,e.page.id=n.getFullYear()+"-"+n.getMonth()+"-"+n.getDay()+"-"+n.getHours()+"-"+n.getSeconds()+"-"+n.getMilliseconds(),t.next=5,e.getMealsType();case 5:return a=t.sent,t.next=8,e.getMeals();case 8:r=t.sent,a.forEach((function(t){var n=r.filter((function(e){return e.type===t._id}));n.length&&(e.meals[t.title]=n)})),e.ready=!0;case 11:case"end":return t.stop()}}),t)})))()},data:function(){return{success:!1,ready:!1,meals:{},checked:[],page:{title:null,content:[],description:null}}},methods:{generateId:function(){var e=new Date;this.page.id=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDay()+"-"+e.getHours()+"-"+e.getSeconds()+"-"+e.getMilliseconds()},getMealsType:function(){return new Promise((function(e){v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},getMeals:function(){return new Promise((function(e){v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},submit:function(){var e=this;v.a.post("http://localhost:3000/pages",{headers:{"Access-Control-Allow-Origin":"*"},page:this.page}).then((function(t){e.success=!0,e.page={title:void 0,description:void 0,content:[]},console.log(t)})).catch((function(e){console.log(e)}))}}},Se=$e,Oe=Object(i["a"])(Se,Pe,Ae,!1,null,null,null),Ne=Oe.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth&&e.ready?n("Layout2",[n("div",{staticClass:"wrapper section-new-page large"},[e.page?n("div",[n("h1",[e._v("Modifier la page : "+e._s(e.page.title))]),n("router-link",{attrs:{to:{name:"Pages"}}},[e._v("Voir toutes les pages")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.updatePage(t)},click:function(t){e.success=!1}}},[n("div",{staticClass:"d-flex full"},[n("div",[n("div",[n("h2",[e._v("Mettre à jour la page")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.title,expression:"page.title"}],attrs:{type:"text",required:""},domProps:{value:e.page.title},on:{input:function(t){t.target.composing||e.$set(e.page,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Description (optionel)")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.description,expression:"page.description"}],attrs:{type:"text"},domProps:{value:e.page.description},on:{input:function(t){t.target.composing||e.$set(e.page,"description",t.target.value)}}})]),n("div",{staticClass:"create-content"},[n("h3",[e._v("Ajouter ou supprimer des plats")]),e._l(e.meals,(function(t,a){return n("details",{key:a},[n("summary",[n("h2",[e._v(e._s(a))])]),e._l(t,(function(t){return n("label",{key:t.title},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.page.content,expression:"page.content"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.page.content)?e._i(e.page.content,t._id)>-1:e.page.content},on:{change:function(n){var a=e.page.content,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.page,"content",a.concat([i])):o>-1&&e.$set(e.page,"content",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.page,"content",s)}}}),n("span",[e._v(e._s(t.title))])])}))],2)}))],2)]),e.success?n("p",{staticClass:"success"},[e._v("La page a bien été créé")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Enregistrer les modifications")]),n("button",{staticClass:"link-2 delete",on:{click:function(t){return t.preventDefault(),e.deletePage(t)}}},[e._v("Supprimer")])]),n("div",{staticClass:"drag"},[n("h2",[e._v("Ordre")]),n("p",[e._v("Pour changer l'odre des plats faites glisser les blocks")]),n("draggable",{staticClass:"container-drag",model:{value:e.page.content,callback:function(t){e.$set(e.page,"content",t)},expression:"page.content"}},[n("transition-group",e._l(e.page.content,(function(t){return n("div",{key:t,staticClass:"item"},[e._v(" "+e._s(e.title(t))+" ")])})),0)],1)],1)])])],1):n("div",[n("h1",[e._v("Aucune page ne correspond à cette url")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"Pages"}}},[e._v("Voir toutes les pages")])],1)])]):e._e()},Te=[],Ee={name:"PagesUpdate",components:{Layout2:J,draggable:be.a},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auth||(window.location.href="/connexion"),t.next=3,e.getPage();case 3:return t.next=5,e.getMealsType();case 5:return n=t.sent,t.next=8,e.getMeals();case 8:e.allMeals=t.sent,n.forEach((function(t){var n=e.allMeals.filter((function(e){return e.type===t._id}));n.length&&(e.meals[t.title]=n)})),e.ready=!0;case 11:case"end":return t.stop()}}),t)})))()},data:function(){return{success:!1,ready:!1,page:void 0,meals:{},allMeals:void 0}},methods:{title:function(e){var t="";return this.allMeals.forEach((function(n){n._id===e&&(t=n.title)})),t},updatePage:function(){var e=this;v.a.patch("http://localhost:3000/pages/".concat(this.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"},page:this.page}).then((function(t){console.log(t),e.success=!0})).catch((function(e){console.log(e)}))},deletePage:function(){v.a.delete("http://localhost:3000/pages/".concat(this.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e),window.location.href="/admin/pages"})).catch((function(e){console.log(e)}))},getPage:function(){var e=this;return new Promise((function(t){v.a.get("http://localhost:3000/pages/".concat(e.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(n){e.page=n.data,t(n)})).catch((function(e){console.log(e)}))}))},getMealsType:function(){return new Promise((function(e){v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},getMeals:function(){return new Promise((function(e){v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))}}},je=Ee,De=Object(i["a"])(je,Le,Te,!1,null,null,null),qe=De.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[e.menus?n("div",{staticClass:"wrapper"},[e.menus.length?n("div",[n("h1",[e._v("La liste des menus")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"MenusCreate"}}},[e._v("Créer un menu +")]),n("div",{staticClass:"list-menu"},e._l(e.menus,(function(t){return n("router-link",{key:t.title,attrs:{to:{name:"MenusUpdate",params:{id:t.id}}}},[n("h2",[e._v(e._s(t.title)+" - "+e._s(t.price)+"€")]),n("p",[e._v("Modifier")])])})),1)],1):n("div",[n("h1",[e._v("Vous n'avez créé aucun menu pour le moment")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"PagesCreate"}}},[e._v("Créer un menu +")])],1)]):e._e()]):e._e()},Re=[],ze={name:"Menus",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.auth||(window.location.href="/connexion"),v.a.get("http://localhost:3000/menus",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.menus=t.data,console.log(e.menus)})).catch((function(t){e.pages=[],console.log(t)}));case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{menus:void 0}}},Ie=ze,Ve=(n("3003"),Object(i["a"])(Ie,Be,Re,!1,null,null,null)),He=Ve.exports,Ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth&&e.ready?n("Layout2",[n("div",{staticClass:"wrapper section-new-page large"},[e.menu?n("div",[n("h1",[e._v("Modifier le menu : "+e._s(e.menu.title))]),n("router-link",{attrs:{to:{name:"Menus"}}},[e._v("Voir tous les menus")]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",{staticClass:"d-flex full"},[n("div",[n("div",[n("h2",[e._v("Mettre le menu")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.title,expression:"menu.title"}],attrs:{type:"text",required:""},domProps:{value:e.menu.title},on:{input:function(t){t.target.composing||e.$set(e.menu,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Description")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.menu.description,expression:"menu.description"}],domProps:{value:e.menu.description},on:{input:function(t){t.target.composing||e.$set(e.menu,"description",t.target.value)}}})]),n("div",{staticClass:"create-content"},[n("h3",[e._v("Ajouter ou supprimer des plats")]),e._l(e.meals,(function(t,a){return n("details",{key:a},[n("summary",[n("h2",[e._v(e._s(a))])]),e._l(t,(function(t){return n("label",{key:t.title},["starter"===e.getMealModel(a)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.starters,expression:"menu.starters"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.starters)?e._i(e.menu.starters,t._id)>-1:e.menu.starters},on:{change:function(n){var a=e.menu.starters,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"starters",a.concat([i])):o>-1&&e.$set(e.menu,"starters",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"starters",s)}}}):"dessert"===e.getMealModel(a)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.desserts,expression:"menu.desserts"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.desserts)?e._i(e.menu.desserts,t._id)>-1:e.menu.desserts},on:{change:function(n){var a=e.menu.desserts,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"desserts",a.concat([i])):o>-1&&e.$set(e.menu,"desserts",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"desserts",s)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.meals,expression:"menu.meals"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.meals)?e._i(e.menu.meals,t._id)>-1:e.menu.meals},on:{change:function(n){var a=e.menu.meals,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"meals",a.concat([i])):o>-1&&e.$set(e.menu,"meals",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"meals",s)}}}),n("span",[e._v(e._s(t.title))])])}))],2)}))],2)]),e.success?n("p",{staticClass:"success"},[e._v("Le menu a bien été mis à jour")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Enregistrer les modifications")]),n("button",{staticClass:"link-2 delete",on:{click:function(t){return t.preventDefault(),e.removeMenu(t)}}},[e._v("Supprimer")])]),n("div",{staticClass:"drag"},[n("h2",[e._v("Ordre")]),n("p",[e._v("Pour changer l'odre des plats faites glisser les blocks")]),e.menu.starters.length?n("div",[n("h3",[e._v("Les entrées")]),n("draggable",{staticClass:"container-drag",model:{value:e.menu.starters,callback:function(t){e.$set(e.menu,"starters",t)},expression:"menu.starters"}},[n("transition-group",e._l(e.menu.starters,(function(t){return n("div",{key:t,staticClass:"item"},[e._v(" "+e._s(e.title(t))+" ")])})),0)],1)],1):e._e(),e.menu.meals.length?n("div",[n("h3",[e._v("Les plats")]),n("draggable",{staticClass:"container-drag",model:{value:e.menu.meals,callback:function(t){e.$set(e.menu,"meals",t)},expression:"menu.meals"}},[n("transition-group",e._l(e.menu.meals,(function(t){return n("div",{key:t,staticClass:"item"},[e._v(" "+e._s(e.title(t))+" ")])})),0)],1)],1):e._e(),e.menu.desserts.length?n("div",[n("h3",[e._v("Les desserts")]),n("draggable",{staticClass:"container-drag",model:{value:e.menu.desserts,callback:function(t){e.$set(e.menu,"desserts",t)},expression:"menu.desserts"}},[n("transition-group",e._l(e.menu.desserts,(function(t){return n("div",{key:t,staticClass:"item"},[e._v(" "+e._s(e.title(t))+" ")])})),0)],1)],1):e._e()])])])],1):n("div",[n("h1",[e._v("Aucune menu ne correspond à cette url")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"Menus"}}},[e._v("Voir tous les menus")])],1)])]):e._e()},Ge=[],Fe={name:"MenusUpdate",components:{Layout2:J,draggable:be.a},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auth||(window.location.href="/connexion"),t.next=3,e.getMenu();case 3:return e.menu=t.sent,t.next=6,e.getMealsType();case 6:return n=t.sent,t.next=9,e.getMeals();case 9:e.allMeals=t.sent,n.forEach((function(t){var n=e.allMeals.filter((function(e){return e.type===t._id}));n.length&&(e.meals[t.title]=n)})),e.ready=!0;case 12:case"end":return t.stop()}}),t)})))()},data:function(){return{menu:void 0,success:!1,ready:!1,meals:{},allMeals:void 0}},methods:{submit:function(){var e=this;v.a.patch("http://localhost:3000/menus/".concat(this.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"},menu:this.menu}).then((function(t){console.log(t),e.success=!0})).catch((function(e){console.log(e)}))},removeMenu:function(){v.a.delete("http://localhost:3000/menus/".concat(this.$route.params.id),{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e),window.location.href="/admin/menus"})).catch((function(e){console.log(e)}))},getMenu:function(){var e=this;return new Promise((function(t){v.a.get("http://localhost:3000/menus/".concat(e.$route.params.id)).then((function(e){console.log(e),t(e.data[0])})).catch((function(t){console.log(t),e.ready=!0}))}))},getMealsType:function(){return new Promise((function(e){v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},getMeals:function(){return new Promise((function(e){v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},getMealModel:function(e){return"Les entrées"===e?"starter":"Les glaces"===e||"Les fromages"===e||"Les desserts"===e||"Les crêpes"===e?"dessert":"meal"},title:function(e){var t="";return this.allMeals.forEach((function(n){n._id===e&&(t=n.title)})),t}}},Je=Fe,We=(n("48eb"),Object(i["a"])(Je,Ue,Ge,!1,null,null,null)),Ye=We.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth?n("Layout2",[n("div",{staticClass:"wrapper"},[n("router-link",{attrs:{to:{name:"Menus"}}},[e._v("Voir tous les menus")]),e.ready?n("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Ajouter une page")]),n("label",[n("span",[e._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.title,expression:"menu.title"}],attrs:{type:"text",required:""},domProps:{value:e.menu.title},on:{input:function(t){t.target.composing||e.$set(e.menu,"title",t.target.value)}}})]),n("label",[n("span",[e._v("Prix")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.price,expression:"menu.price"}],attrs:{type:"number",step:"0.01",required:""},domProps:{value:e.menu.price},on:{input:function(t){t.target.composing||e.$set(e.menu,"price",t.target.value)}}})]),n("label",[n("span",[e._v("Description (optionnel)")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.menu.description,expression:"menu.description"}],domProps:{value:e.menu.description},on:{input:function(t){t.target.composing||e.$set(e.menu,"description",t.target.value)}}})]),n("div",{staticClass:"create-content"},[n("h3",[e._v("Choisir son contenu")]),e._l(e.meals,(function(t,a){return n("details",{key:a},[n("summary",[n("h2",[e._v(e._s(a))])]),e._l(t,(function(t){return n("label",{key:t.title},["starter"===e.getMealModel(a)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.starters,expression:"menu.starters"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.starters)?e._i(e.menu.starters,t._id)>-1:e.menu.starters},on:{change:function(n){var a=e.menu.starters,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"starters",a.concat([i])):o>-1&&e.$set(e.menu,"starters",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"starters",s)}}}):"dessert"===e.getMealModel(a)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.desserts,expression:"menu.desserts"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.desserts)?e._i(e.menu.desserts,t._id)>-1:e.menu.desserts},on:{change:function(n){var a=e.menu.desserts,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"desserts",a.concat([i])):o>-1&&e.$set(e.menu,"desserts",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"desserts",s)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.menu.meals,expression:"menu.meals"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t._id,checked:Array.isArray(e.menu.meals)?e._i(e.menu.meals,t._id)>-1:e.menu.meals},on:{change:function(n){var a=e.menu.meals,r=n.target,s=!!r.checked;if(Array.isArray(a)){var i=t._id,o=e._i(a,i);r.checked?o<0&&e.$set(e.menu,"meals",a.concat([i])):o>-1&&e.$set(e.menu,"meals",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.menu,"meals",s)}}}),n("span",[e._v(e._s(t.title))])])}))],2)}))],2)]),e.success?n("p",{staticClass:"success"},[e._v("Le menu a bien été créé")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Créer le menu")])]):e._e()],1)]):e._e()},Ke=[],Xe={name:"MenusCreate",components:{Layout2:J},computed:{auth:function(){return j.state.auth}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auth||(window.location.href="/connexion"),t.next=3,e.getMealsType();case 3:return n=t.sent,t.next=6,e.getMeals();case 6:a=t.sent,n.forEach((function(t){var n=a.filter((function(e){return e.type===t._id}));n.length&&(e.meals[t.title]=n)})),console.log(e.meals),e.ready=!0;case 10:case"end":return t.stop()}}),t)})))()},data:function(){return{meals:{},ready:!1,success:!1,menu:{data:{headers:{"Access-Control-Allow-Origin":"*"}},title:void 0,description:void 0,starters:[],meals:[],desserts:[]}}},methods:{getMealModel:function(e){return"Les entrées"===e?"starter":"Les glaces"===e||"Les fromages"===e||"Les desserts"===e||"Les crêpes"===e?"dessert":"meal"},getMealsType:function(){return new Promise((function(e){v.a.get("http://localhost:3000/types",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},getMeals:function(){return new Promise((function(e){v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e(t.data)})).catch((function(e){console.log(e)}))}))},submit:function(){var e=this;v.a.post("http://localhost:3000/menus",this.menu).then((function(t){console.log(t),e.success=!0,e.menu={data:{headers:{"Access-Control-Allow-Origin":"*"}},title:void 0,description:void 0,starters:[],meals:[],desserts:[]}})).catch((function(e){console.log(e)}))}}},Ze=Xe,et=Object(i["a"])(Ze,Qe,Ke,!1,null,null,null),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth&&e.general?n("Layout2",[e.pages?n("div",{staticClass:"wrapper-2"},[e.pages.length?n("div",{staticClass:"edit"},[n("h1",[e._v("Personnaliser la carte")]),n("form",{staticClass:"form-download",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("h2",[e._v("Choisir la ou les pages :")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.pageToPrint,expression:"pageToPrint"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pageToPrint=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"all"}},[e._v("Toute la carte")]),e._l(e.pages,(function(t){return n("option",{key:"pdf-"+t.id,domProps:{value:t.id}},[e._v(e._s(t.title))])}))],2),n("button",{attrs:{type:"submit"}},[e._v("Télécharger en pdf")])]),n("form",{staticClass:"list-settings",on:{submit:function(t){return t.preventDefault(),e.update(t)},click:function(t){e.success=!1}}},[n("div",[n("h2",[e._v("Mise en page générale")]),n("div",{staticClass:"f2"},[n("label",[n("span",[e._v("Marge supérieur de la page")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.marginTop,expression:"general.marginTop"}],attrs:{type:"number",required:""},domProps:{value:e.general.marginTop},on:{input:function(t){t.target.composing||e.$set(e.general,"marginTop",t.target.value)}}})]),n("label",[n("span",[e._v("Marges droite et gauche de la page")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.marginLeft,expression:"general.marginLeft"}],attrs:{type:"number",required:""},domProps:{value:e.general.marginLeft},on:{input:function(t){t.target.composing||e.$set(e.general,"marginLeft",t.target.value)}}})]),n("label",[n("span",[e._v("Typographie")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.fonts,expression:"general.fonts"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"fonts",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"font-1"}},[e._v("Elegante")]),n("option",{attrs:{value:"font-2"}},[e._v("Manuscrite")]),n("option",{attrs:{value:"font-3"}},[e._v("Créative")]),n("option",{attrs:{value:"font-4"}},[e._v("Epaisse")]),n("option",{attrs:{value:"font-5"}},[e._v("Moderne")]),n("option",{attrs:{value:"font-6"}},[e._v("Elancée")])])]),n("label",[n("span",[e._v("Taille des titres")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.titleSize,expression:"general.titleSize"}],attrs:{type:"number",min:"12",required:""},domProps:{value:e.general.titleSize},on:{input:function(t){t.target.composing||e.$set(e.general,"titleSize",t.target.value)}}})]),n("label",[n("span",[e._v("Marge sous les titres")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.titleMarginBottom,expression:"general.titleMarginBottom"}],attrs:{type:"number",required:""},domProps:{value:e.general.titleMarginBottom},on:{input:function(t){t.target.composing||e.$set(e.general,"titleMarginBottom",t.target.value)}}})]),n("label",[n("span",[e._v("Centrer les titres ?")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.centerTitle,expression:"general.centerTitle"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"centerTitle",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:!0}},[e._v("Oui")]),n("option",{domProps:{value:!1}},[e._v("Non")])])]),n("label",[n("span",[e._v("Taille des textes")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.textSize,expression:"general.textSize"}],attrs:{type:"number",min:"10",required:""},domProps:{value:e.general.textSize},on:{input:function(t){t.target.composing||e.$set(e.general,"textSize",t.target.value)}}})]),n("label",[n("span",[e._v("Interlignage")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.lineHeight,expression:"general.lineHeight"}],attrs:{type:"number",step:"0.1",required:""},domProps:{value:e.general.lineHeight},on:{input:function(t){t.target.composing||e.$set(e.general,"lineHeight",t.target.value)}}})])]),n("h2",[e._v("Plats")]),n("div",{staticClass:"f2"},[n("label",[n("span",[e._v("Tailles des titres des plats")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.titleMealSize,expression:"general.titleMealSize"}],attrs:{type:"number",required:""},domProps:{value:e.general.titleMealSize},on:{input:function(t){t.target.composing||e.$set(e.general,"titleMealSize",t.target.value)}}})]),n("label",[n("span",[e._v("Marge sous les plats")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.mealMarginBottom,expression:"general.mealMarginBottom"}],attrs:{type:"number",required:""},domProps:{value:e.general.mealMarginBottom},on:{input:function(t){t.target.composing||e.$set(e.general,"mealMarginBottom",t.target.value)}}})]),n("label",[n("span",[e._v("Quel affichage des prix ?")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.mealPriceStyle,expression:"general.mealPriceStyle"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"mealPriceStyle",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"price-1"}},[e._v("Lignes")]),n("option",{attrs:{value:"price-2"}},[e._v("Pointillés")])])]),n("label",[n("span",[e._v("Couleur de l'info supplémentaire")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.infoColor,expression:"general.infoColor"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"infoColor",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"#aaa"}},[e._v("Gris clair")]),n("option",{attrs:{value:"#940000"}},[e._v("Bordeau")]),n("option",{attrs:{value:"#001fce"}},[e._v("Bleu")]),n("option",{attrs:{value:"#b96e00"}},[e._v("Or")]),n("option",{attrs:{value:"#ef7448"}},[e._v("Orange")])])])]),n("h2",[e._v("Menus")]),n("div",{staticClass:"f2"},[n("label",[n("span",[e._v("Taille des titres des menus")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.titleMenuSize,expression:"general.titleMenuSize"}],attrs:{type:"number",min:"12",required:""},domProps:{value:e.general.titleMenuSize},on:{input:function(t){t.target.composing||e.$set(e.general,"titleMenuSize",t.target.value)}}})]),n("label",[n("span",[e._v("Apparence des prix des menus")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.menuPriceStyle,expression:"general.menuPriceStyle"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"menuPriceStyle",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"menu-price-1"}},[e._v("Option 1")]),n("option",{attrs:{value:"menu-price-2"}},[e._v("Option 2")]),n("option",{attrs:{value:"menu-price-3"}},[e._v("Option 3")])])]),n("label",[n("span",[e._v("Style des menus")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.menuStyle,expression:"general.menuStyle"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"menuStyle",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"menu-style-1"}},[e._v("Aligner en haut")]),n("option",{attrs:{value:"menu-style-2"}},[e._v("Hauteur complète")])])]),n("label",[n("span",[e._v("Centrer les titres des menus ?")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.general.centerMenuTitle,expression:"general.centerMenuTitle"}],attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.general,"centerMenuTitle",t.target.multiple?n:n[0])}}},[n("option",{domProps:{value:!0}},[e._v("Oui")]),n("option",{domProps:{value:!1}},[e._v("Non")])])]),n("label",[n("span",[e._v("Marge sous les titres des menus")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.titleMenuMarginBottom,expression:"general.titleMenuMarginBottom"}],attrs:{type:"number",required:""},domProps:{value:e.general.titleMenuMarginBottom},on:{input:function(t){t.target.composing||e.$set(e.general,"titleMenuMarginBottom",t.target.value)}}})]),n("label",[n("span",[e._v("Marge sous les plats des menus")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.general.menuMealMarginBottom,expression:"general.menuMealMarginBottom"}],attrs:{type:"number",required:""},domProps:{value:e.general.menuMealMarginBottom},on:{input:function(t){t.target.composing||e.$set(e.general,"menuMealMarginBottom",t.target.value)}}})])])]),e.success?n("p",{staticClass:"success"},[e._v("Vos modifications ont bien été enregistrées")]):e._e(),n("button",{staticClass:"link-2",attrs:{type:"submit"}},[e._v("Enregistrer mes modifications")])])]):n("div",[n("h1",[e._v("Vous n'avez créé aucune page ni menu pour le moment")]),n("router-link",{staticClass:"link-2",attrs:{to:{name:"PagesCreate"}}},[e._v("Créer une page +")])],1),e.pages.length&&e.meals?n("div",{staticClass:"container-pages",class:e.fontStyle},e._l(e.pages,(function(t){return n("MenuPage",{key:t.id,attrs:{page:t,general:e.general,meals:e.meals}})})),1):e._e()]):e._e(),n("transition",{attrs:{name:"fade"}},[e.loader?n("div",{staticClass:"loader"},[n("p",[e._v("Génération du pdf en cours")]),n("p",[n("i"),n("i"),n("i")])]):e._e()])],1):e._e()},at=[],rt=(n("5319"),n("e511")),st=n.n(rt),it=n("c0e9"),ot=n.n(it),lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.meals&&e.page?n("div",{staticClass:"parent"},[n("div",{staticClass:"page",class:e.menuClass,style:e.pageStyles,attrs:{id:e.page.id}},[n("div",{staticClass:"heading",style:e.titleMarginBottom},[n("h2",{class:e.menuPriceClass,style:e.h2Styles},[n("span",[e._v(e._s(e.page.title))]),e.page.price?n("span",{staticClass:"menu-price"},[e._v(e._s(e._f("price")(e.page.price))+"€")]):e._e()]),e.page.description?n("h3",[e._v(e._s(e.page.description))]):e._e()]),e.isMenu?n("div",{staticClass:"menu-meals"},[e.menu.starters.length?n("MenuChoice",{attrs:{item:e.menu.starters,page:e.page,"info-style":e.infoStyle,"menu-meal-styles":e.menuMealStyles,"h3-styles":e.h3Styles,"menu-choice-style":e.menuChoiceStyle}}):e._e(),"menu-style-2"===e.menuStyle&&e.menu.starters.length?n("hr"):e._e(),e.menu.meals.length?n("MenuChoice",{attrs:{item:e.menu.meals,page:e.page,"info-style":e.infoStyle,"menu-meal-styles":e.menuMealStyles,"h3-styles":e.h3Styles,"menu-choice-style":e.menuChoiceStyle}}):e._e(),"menu-style-2"===e.menuStyle&&e.menu.meals.length?n("hr"):e._e(),e.menu.desserts.length?n("MenuChoice",{attrs:{item:e.menu.desserts,page:e.page,"info-style":e.infoStyle,"menu-meal-styles":e.menuMealStyles,"h3-styles":e.h3Styles,"menu-choice-style":e.menuChoiceStyle}}):e._e()],1):n("div",e._l(e.content,(function(t){return n("div",{key:e.page.id+t._id,staticClass:"meal",style:e.mealStyles},[n("h3",{staticClass:"meal-price",class:e.general.mealPriceStyle,style:e.h3Styles},[n("span",{staticClass:"title"},[e._v(e._s(t.title))]),t.price?n("span",{staticClass:"price",style:e.priceStyles},[e._v(e._s(e._f("price")(t.price))+"€")]):e._e()]),t.description?n("p",[e._v(e._s(t.description))]):e._e(),t.infos?n("p",{staticClass:"info",style:e.infoStyle},[e._v(e._s(t.infos))]):e._e(),t.variant_1_title||t.variant_2_title?n("ul",{class:e.general.mealPriceStyle},[t.variant_1_title&&t.variant_1_price?n("li",[n("h4",[e._v(e._s(t.variant_1_title))]),n("p",{staticClass:"price"},[n("span",[e._v(e._s(e._f("price")(t.variant_1_price))+"€")])])]):e._e(),t.variant_2_title&&t.variant_2_price?n("li",[n("h4",[e._v(e._s(t.variant_2_title))]),n("p",{staticClass:"price"},[n("span",[e._v(e._s(e._f("price")(t.variant_2_price))+"€")])])]):e._e()]):e._e()])})),0)])]):e._e()},ut=[],ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"choices",style:e.menuChoiceStyle},e._l(e.item,(function(t,a){return n("div",{key:e.page.id+"item"+a},[0!==a?n("p",{staticClass:"or",style:e.menuMealStyles},[e._v("Ou")]):e._e(),n("h3",{staticClass:"title",style:e.h3Styles},[e._v(e._s(t.title))]),t.description?n("p",[e._v(e._s(t.description))]):e._e(),t.infos?n("p",{staticClass:"info",style:e.infoStyle},[e._v(e._s(t.infos))]):e._e()])})),0)},pt=[],mt={name:"MenuChoice",props:["item","page","infoStyle","menuMealStyles","h3Styles","menuChoiceStyle"]},dt=mt,vt=Object(i["a"])(dt,ct,pt,!1,null,null,null),gt=vt.exports,ft={name:"MenuPage",components:{MenuChoice:gt},props:{page:{},general:{},meals:{}},data:function(){return{isMenu:"menu"===this.page.type,content:[],menu:{starters:[],meals:[],desserts:[]}}},computed:{pageStyles:function(){var e={padding:this.general.marginTop+"px "+this.general.marginLeft+"px 0",height:"calc(1120px - "+this.general.marginTop+"px)",fontSize:this.general.textSize+"px",lineHeight:this.general.lineHeight};return this.isMenu&&"menu-style-2"===this.menuStyle&&(e.padding=this.general.marginTop+"px "+this.general.marginLeft+"px"),e},h2Styles:function(){return{fontSize:this.isMenu?this.general.titleMenuSize+"px":this.general.titleSize+"px",textAlign:"menu"===this.page.type&&this.general.centerMenuTitle||"menu"!==this.page.type&&this.general.centerTitle?"center":"left"}},mealStyles:function(){return{marginTop:this.general.mealMarginBottom+"px"}},h3Styles:function(){return{fontSize:this.general.titleMealSize+"px"}},titleMarginBottom:function(){return{marginBottom:this.isMenu?this.general.titleMenuMarginBottom+"px":this.general.titleMarginBottom+"px"}},priceStyles:function(){return{fontSize:this.general.textSize+"px"}},infoStyle:function(){return{color:this.general.infoColor}},menuPriceClass:function(){return this.isMenu?this.general.menuPriceStyle:""},menuMealStyles:function(){return{margin:this.general.menuMealMarginBottom/2+"px 0"}},menuStyle:function(){return this.general.menuStyle},menuClass:function(){return this.isMenu?this.general.menuStyle+" is-menu":""},menuChoiceStyle:function(){return"menu-style-1"===this.general.menuStyle?{marginTop:this.general.menuMealMarginBottom+"px",paddingTop:this.general.menuMealMarginBottom+"px"}:""}},mounted:function(){var e=this;this.page.content?this.page.content.forEach((function(t){e.content.push(e.meals.filter((function(e){return e._id===t}))[0])})):(this.page.starters.forEach((function(t){e.menu.starters.push(e.meals.filter((function(e){return e._id===t}))[0])})),this.page.meals.forEach((function(t){e.menu.meals.push(e.meals.filter((function(e){return e._id===t}))[0])})),this.page.desserts.forEach((function(t){e.menu.desserts.push(e.meals.filter((function(e){return e._id===t}))[0])})))}},_t=ft,ht=(n("2238"),Object(i["a"])(_t,lt,ut,!1,null,null,null)),yt=ht.exports,wt={name:"RestaurantMenu",components:{MenuPage:yt,Layout2:J},computed:{auth:function(){return j.state.auth},fontStyle:function(){return this.general.fonts}},mounted:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get("http://localhost:3000/pages",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.pages=t.data})).catch((function(t){e.pages=[],console.log(t)})),v.a.get("http://localhost:3000/general",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.general=t.data[0]})).catch((function(e){console.log(e)})),v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){e.meals=t.data})).catch((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{pages:void 0,generalId:void 0,meals:void 0,success:!1,loader:!1,pageToPrint:"all",pdf:void 0,options:{margin:0,filename:"myfile.pdf",image:{type:"jpeg",quality:1},html2canvas:{scale:2}},general:void 0}},methods:{submit:function(){this.loader=!0,"all"===this.pageToPrint?this.printAll():this.print()},printAll:function(){var e=this;return Object(ee["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.pdf=new st.a("p","mm","a4"),n="la_demilune_carte.pdf",t.next=4,e.createCanvas();case 4:e.pdf.save(n),console.log("save"),e.loader=!1;case 7:case"end":return t.stop()}}),t)})))()},createCanvas:function(){var e=this;return new Promise((function(t){e.pages.forEach(function(){var n=Object(ee["a"])(regeneratorRuntime.mark((function n(a,r){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ot()(document.getElementById(a.id),{scale:2});case 2:s=n.sent,0!==r&&e.pdf.addPage(),e.pdf.addImage(s.toDataURL("image/png"),"PNG",0,0,211,298),console.log("new canvas",a.title),r===e.pages.length-1&&t("resolved");case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}))},print:function(){var e=this,t=this.pages.filter((function(t){return t.id===e.pageToPrint}))[0].title.replace(/ /g,"_").toLowerCase()+"pdf";ot()(document.getElementById(this.pageToPrint),{scale:2}).then((function(n){var a=new st.a("p","mm","a4");a.addImage(n.toDataURL("image/png"),"PNG",0,0,211,298),a.save(t),e.loader=!1})).catch((function(t){e.loader=!1,console.log(t)}))},update:function(){var e=this;v.a.patch("http://localhost:3000/general",{headers:{"Access-Control-Allow-Origin":"*"},data:this.general}).then((function(t){console.log(t),e.success=!0})).catch((function(e){console.log(e)}))}}},bt=wt,xt=(n("1ea8"),Object(i["a"])(bt,nt,at,!1,null,null,null)),Mt=xt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.general?a("default-layout",{attrs:{text:e.general.footer,"class-name":"page-main-menu"}},[a("div",{staticClass:"page-menu"},[a("section",{staticClass:"section-image"},[a("h1",[e._v("La Carte")]),a("img",{attrs:{src:n("a5c6"),alt:"restaurant la demi-lune à Dole"}})]),e.meals?a("section",{staticClass:"wrapper"},[a("h2",[a("button",{class:{active:1===e.open},on:{click:function(t){e.open=1}}},[e._v("Nos plats à la carte")]),a("button",{class:{active:2===e.open},on:{click:function(t){e.open=2}}},[e._v("Nos menus")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.open,expression:"open === 1"}],staticClass:"container_pages"},e._l(e.pages,(function(t){return a("page-item",{key:"page-"+t.id,attrs:{page:t,meals:e.meals}})})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.open,expression:"open === 2"}],staticClass:"container_menus"},e._l(e.menus,(function(t){return a("MenuItem",{key:t.id,attrs:{page:t,meals:e.meals}})})),1)]):e._e(),a("gallery")],1)]):e._e()},kt=[],Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-item"},[n("h3",[e._v(e._s(e.page.title)+" - "+e._s(e._f("price")(e.page.price))+"€")]),n("menu-choice-web",{attrs:{meals:e.menu.starters}}),n("menu-choice-web",{attrs:{meals:e.menu.meals}}),n("menu-choice-web",{attrs:{meals:e.menu.desserts}})],1)},At=[],$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.meals?n("div",{staticClass:"menu-choice-web"},e._l(e.meals,(function(t,a){return n("div",{key:t._id},[0!==a?n("p",{staticClass:"or"},[e._v("Ou")]):e._e(),n("h4",[e._v(e._s(t.title))]),t.description?n("p",{staticClass:"description"},[e._v(e._s(t.description))]):e._e(),t.infos?n("p",{staticClass:"infos"},[e._v(e._s(t.infos))]):e._e()])})),0):e._e()},St=[],Ot={name:"MenuChoiceWeb",props:["meals"]},Nt=Ot,Lt=Object(i["a"])(Nt,$t,St,!1,null,null,null),Tt=Lt.exports,Et={name:"MenuItem",components:{MenuChoiceWeb:Tt},props:["page","meals"],data:function(){return{meal:void 0,menu:{starters:[],meals:[],desserts:[]}}},mounted:function(){var e=this;this.page.starters.forEach((function(t){e.menu.starters.push(e.meals.filter((function(e){return e._id===t}))[0])})),this.page.meals.forEach((function(t){e.menu.meals.push(e.meals.filter((function(e){return e._id===t}))[0])})),this.page.desserts.forEach((function(t){e.menu.desserts.push(e.meals.filter((function(e){return e._id===t}))[0])}))}},jt=Et,Dt=Object(i["a"])(jt,Pt,At,!1,null,null,null),qt=Dt.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.content.length?n("div",{staticClass:"page-item"},[n("h3",[e._v(e._s(e.page.title))]),e._l(e.content,(function(t){return n("div",{key:"meal-"+t._id,staticClass:"meal"},[n("h4",[n("span",[e._v(e._s(t.title))]),t.price?n("span",{staticClass:"price"},[e._v(e._s(e._f("price")(t.price))+"€")]):e._e()]),t.description?n("p",{staticClass:"description"},[e._v(e._s(t.description))]):e._e(),t.infos?n("p",{staticClass:"infos"},[e._v(e._s(t.infos))]):e._e()])}))],2):e._e()},Rt=[],zt={name:"PageItem",props:["page","meals"],data:function(){return{content:[]}},mounted:function(){var e=this;this.page.content.forEach((function(t){e.content.push(e.meals.filter((function(e){return e._id===t}))[0])}))}},It=zt,Vt=Object(i["a"])(It,Bt,Rt,!1,null,null,null),Ht=Vt.exports,Ut={name:"Carte",components:{Gallery:w,PageItem:Ht,MenuItem:qt},mounted:function(){var e=this;v.a.get("http://localhost:3000/general",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){t.data.error||!t.data.length?window.location.href="/":(e.general=t.data[0],e.pages=e.general.pages.filter((function(e){return"page"===e.type})),e.menus=e.general.pages.filter((function(e){return"menu"===e.type})))})).catch((function(e){console.log(e),window.location.href="/"})),v.a.get("http://localhost:3000/meals",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){t.data.error||!t.data.length?window.location.href="/":e.meals=t.data})).catch((function(e){console.log(e),window.location.href="/"}))},data:function(){return{general:void 0,menus:void 0,pages:void 0,meals:void 0,open:1}}},Gt=Ut,Ft=(n("3777"),Object(i["a"])(Gt,Ct,kt,!1,null,null,null)),Jt=Ft.exports;a["a"].use(c["a"]);var Wt=[{path:"/",name:"Home",component:C},{path:"/about",name:"About",component:S},{path:"/connexion",name:"Login",component:R},{path:"/admin",name:"Admin",component:K},{path:"/admin/plats",name:"Meals",component:re},{path:"/admin/plats/nouveau",name:"MealCreate",component:pe},{path:"/admin/plats/:id",name:"MealUpdate",component:_e},{path:"/admin/pages",name:"Pages",component:ke},{path:"/admin/pages/nouveau",name:"PagesCreate",component:Ne},{path:"/admin/pages/:id",name:"PagesUpdate",component:qe},{path:"/admin/menus",name:"Menus",component:He},{path:"/admin/menus/:id",name:"MenusUpdate",component:Ye},{path:"/admin/menus/:id",name:"MenusCreate",component:tt},{path:"/admin/carte",name:"RestaurantMenu",component:Mt},{path:"/carte",name:"Carte",component:Jt}],Yt=new c["a"]({mode:"history",base:"/",routes:Wt}),Qt=Yt,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className},[a("header",[a("router-link",{attrs:{to:{name:"Home"}}},[a("img",{attrs:{src:n("d6c5"),alt:"logo du restaurant la Demi-lune à Dole"}})]),e._m(0)],1),a("main",[e._t("default")],2),a("footer",[e._m(1),e._m(2),a("p",[e._v(e._s(e.text))])])])},Xt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"link-1",attrs:{href:"tel:0384728282"}},[e._v("Réservation "),n("span",[e._v("03 84 72 82 82")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Restaurant la Demi-Lune")]),n("p",[e._v("39 rue Pasteur, 39100 Dole")]),n("br")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("Réservation uniquement par téléphone")]),n("p",[e._v("03 84 72 82 82")]),n("br")])}],Zt={name:"Default",props:{text:String,className:String}},en=Zt,tn=(n("773d"),Object(i["a"])(en,Kt,Xt,!1,null,null,null)),nn=tn.exports;a["a"].component("default-layout",nn),a["a"].filter("price",(function(e){return e?e%1===0?e:Number(e).toFixed(2):""})),a["a"].config.productionTip=!1,new a["a"]({router:Qt,render:function(e){return e(u)}}).$mount("#app")},"5baa":function(e,t,n){"use strict";var a=n("1b67"),r=n.n(a);r.a},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},6516:function(e,t,n){},"6b19":function(e,t,n){},"773d":function(e,t,n){"use strict";var a=n("f717"),r=n.n(a);r.a},"9c0c":function(e,t,n){},a5c6:function(e,t,n){e.exports=n.p+"img/dole.bbcf68cf.webp"},b1cb:function(e,t,n){e.exports=n.p+"img/terrasse.927b1df0.webp"},d6c5:function(e,t,n){e.exports=n.p+"img/logo_demi_lune.ed632205.svg"},d748:function(e,t,n){},e347:function(e,t,n){e.exports=n.p+"img/logo.607fa11d.svg"},f00e:function(e,t,n){"use strict";var a=n("3a89"),r=n.n(a);r.a},f141:function(e,t,n){e.exports=n.p+"img/cover1.4af3bbb0.webp"},f717:function(e,t,n){},f768:function(e,t,n){e.exports=n.p+"img/cover.7a8f415f.jpg"}});
//# sourceMappingURL=app.d5a6d2c5.js.map